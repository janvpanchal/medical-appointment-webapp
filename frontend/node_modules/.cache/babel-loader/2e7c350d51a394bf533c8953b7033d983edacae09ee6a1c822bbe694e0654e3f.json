{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Janvi\\\\Downloads\\\\medical-appointment-webapp\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport SignIn from './components/SignIn';\nimport OtpVerification from './components/OtpVerification';\nimport PatientDashboard from './components/PatientDashboard';\nimport DoctorDashboard from './components/DoctorDashboard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const [step, setStep] = useState('signin');\n  const [phone, setPhone] = useState('');\n  const [otp, setOtp] = useState('');\n  const [user, setUser] = useState(null);\n  const [doctors, setDoctors] = useState([]);\n  const [doctorId, setDoctorId] = useState('');\n  const [date, setDate] = useState('');\n  const [appointments, setAppointments] = useState([]);\n  const API_BASE = 'http://localhost:5000/api';\n  async function sendOtp() {\n    if (!/^\\d{10,15}$/.test(phone)) return alert('Enter valid phone number');\n    try {\n      await axios.post(`${API_BASE}/auth/send-otp`, {\n        phone\n      });\n      setStep('otp');\n    } catch {\n      alert('Error sending OTP');\n    }\n  }\n  async function verifyOtp() {\n    if (otp !== '123456') return alert('Enter correct OTP (123456)');\n    try {\n      const res = await axios.post(`${API_BASE}/auth/verify-otp`, {\n        phone,\n        otp\n      });\n      setUser(res.data);\n      setStep(res.data.role === 'patient' ? 'patient' : 'doctor');\n    } catch {\n      alert('OTP verification failed');\n    }\n  }\n  useEffect(() => {\n    if (step === 'patient') {\n      axios.get(`${API_BASE}/doctors`).then(res => setDoctors(res.data)).catch(() => alert('Failed to load doctors'));\n    }\n  }, [step]);\n  useEffect(() => {\n    if ((step === 'patient' || step === 'doctor') && user) {\n      axios.get(`${API_BASE}/appointments/${user.userId}`).then(res => setAppointments(res.data)).catch(() => alert('Failed to load appointments'));\n    }\n  }, [step, user]);\n  async function bookAppointment(e) {\n    e.preventDefault();\n    if (!doctorId || !date) return alert('Select doctor and date/time');\n    try {\n      await axios.post(`${API_BASE}/appointments`, {\n        userId: user.userId,\n        doctorId,\n        date\n      });\n      setDate('');\n      setDoctorId('');\n      const res = await axios.get(`${API_BASE}/appointments/${user.userId}`);\n      setAppointments(res.data);\n    } catch {\n      alert('Failed to book appointment');\n    }\n  }\n  function logout() {\n    setUser(null);\n    setPhone('');\n    setOtp('');\n    setAppointments([]);\n    setDoctors([]);\n    setStep('signin');\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-white text-gray-700 font-sans max-w-4xl mx-auto p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"sticky top-0 bg-white border-b border-gray-200 flex justify-between items-center py-4 px-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"font-semibold text-3xl\",\n        children: \"MedBook\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), user ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: logout,\n        className: \"bg-black text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-800 transition\",\n        children: \"Sign Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), step === 'signin' && /*#__PURE__*/_jsxDEV(SignIn, {\n      phone: phone,\n      setPhone: setPhone,\n      sendOtp: sendOtp\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }, this), step === 'otp' && /*#__PURE__*/_jsxDEV(OtpVerification, {\n      phone: phone,\n      otp: otp,\n      setOtp: setOtp,\n      verifyOtp: verifyOtp\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 26\n    }, this), step === 'patient' && /*#__PURE__*/_jsxDEV(PatientDashboard, {\n      doctors: doctors,\n      doctorId: doctorId,\n      setDoctorId: setDoctorId,\n      date: date,\n      setDate: setDate,\n      bookAppointment: bookAppointment,\n      appointments: appointments\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 30\n    }, this), step === 'doctor' && /*#__PURE__*/_jsxDEV(DoctorDashboard, {\n      appointments: appointments\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"6D4FGkfC5tUM6TuejkEde1CHTZ0=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","SignIn","OtpVerification","PatientDashboard","DoctorDashboard","jsxDEV","_jsxDEV","App","_s","step","setStep","phone","setPhone","otp","setOtp","user","setUser","doctors","setDoctors","doctorId","setDoctorId","date","setDate","appointments","setAppointments","API_BASE","sendOtp","test","alert","post","verifyOtp","res","data","role","get","then","catch","userId","bookAppointment","e","preventDefault","logout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Janvi/Downloads/medical-appointment-webapp/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport SignIn from './components/SignIn'\r\nimport OtpVerification from './components/OtpVerification'\r\nimport PatientDashboard from './components/PatientDashboard'\r\nimport DoctorDashboard from './components/DoctorDashboard'\r\n\r\nexport default function App() {\r\n  const [step, setStep] = useState('signin')\r\n  const [phone, setPhone] = useState('')\r\n  const [otp, setOtp] = useState('')\r\n  const [user, setUser ] = useState(null)\r\n  const [doctors, setDoctors] = useState([])\r\n  const [doctorId, setDoctorId] = useState('')\r\n  const [date, setDate] = useState('')\r\n  const [appointments, setAppointments] = useState([])\r\n\r\n  const API_BASE = 'http://localhost:5000/api'\r\n\r\n  async function sendOtp() {\r\n    if (!/^\\d{10,15}$/.test(phone)) return alert('Enter valid phone number')\r\n    try {\r\n      await axios.post(`${API_BASE}/auth/send-otp`, { phone })\r\n      setStep('otp')\r\n    } catch {\r\n      alert('Error sending OTP')\r\n    }\r\n  }\r\n\r\n  async function verifyOtp() {\r\n    if (otp !== '123456') return alert('Enter correct OTP (123456)')\r\n    try {\r\n      const res = await axios.post(`${API_BASE}/auth/verify-otp`, { phone, otp })\r\n      setUser (res.data)\r\n      setStep(res.data.role === 'patient' ? 'patient' : 'doctor')\r\n    } catch {\r\n      alert('OTP verification failed')\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (step === 'patient') {\r\n      axios.get(`${API_BASE}/doctors`)\r\n        .then(res => setDoctors(res.data))\r\n        .catch(() => alert('Failed to load doctors'))\r\n    }\r\n  }, [step])\r\n\r\n  useEffect(() => {\r\n    if ((step === 'patient' || step === 'doctor') && user) {\r\n      axios.get(`${API_BASE}/appointments/${user.userId}`)\r\n        .then(res => setAppointments(res.data))\r\n        .catch(() => alert('Failed to load appointments'))\r\n    }\r\n  }, [step, user])\r\n\r\n  async function bookAppointment(e) {\r\n    e.preventDefault()\r\n    if (!doctorId || !date) return alert('Select doctor and date/time')\r\n    try {\r\n      await axios.post(`${API_BASE}/appointments`, {\r\n        userId: user.userId,\r\n        doctorId,\r\n        date,\r\n      })\r\n      setDate('')\r\n      setDoctorId('')\r\n      const res = await axios.get(`${API_BASE}/appointments/${user.userId}`)\r\n      setAppointments(res.data)\r\n    } catch {\r\n      alert('Failed to book appointment')\r\n    }\r\n  }\r\n\r\n  function logout() {\r\n    setUser (null)\r\n    setPhone('')\r\n    setOtp('')\r\n    setAppointments([])\r\n    setDoctors([])\r\n    setStep('signin')\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white text-gray-700 font-sans max-w-4xl mx-auto p-6\">\r\n      <header className=\"sticky top-0 bg-white border-b border-gray-200 flex justify-between items-center py-4 px-6\">\r\n        <h1 className=\"font-semibold text-3xl\">MedBook</h1>\r\n        {user ? (\r\n          <button\r\n            onClick={logout}\r\n            className=\"bg-black text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-800 transition\"\r\n          >\r\n            Sign Out\r\n          </button>\r\n        ) : null}\r\n      </header>\r\n\r\n      {step === 'signin' && <SignIn phone={phone} setPhone={setPhone} sendOtp={sendOtp} />}\r\n      {step === 'otp' && <OtpVerification phone={phone} otp={otp} setOtp={setOtp} verifyOtp={verifyOtp} />}\r\n      {step === 'patient' && <PatientDashboard doctors={doctors} doctorId={doctorId} setDoctorId={setDoctorId} date={date} setDate={setDate} bookAppointment={bookAppointment} appointments={appointments} />}\r\n      {step === 'doctor' && <DoctorDashboard appointments={appointments} />}\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}